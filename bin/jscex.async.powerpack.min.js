(function(){var f=Jscex.Async,d=f.Task,i=f.CanceledError;f.sleep=function(b,c){return new d({onStart:function(e){c&&c.throwIfCancellationRequested();var g=setTimeout(function(){e("success")},b);c&&c.register(function(){clearTimeout(g);e("failure",new i)})}})};f.onEvent=function(b,c){var e="on"+c;return new d({onStart:function(c){b[e]=function(a){b[e]=null;c("success",a)}}})};d.waitAll=function(b){return new d({onStart:function(c){for(var e={},g=[],a=0;a<b.length;a++)e[b[a].id]=a,g.push(h);var f=[],
d=function(a){if(a.error){for(var b=0;b<tasksClone.length;b++)g[b].removeListener(d);c("failure",a.error)}else f[e[a.id]]=a.result,a=tasksClone.indexOf(a),g.splice(a,1),g.length==0&&(finished=!0,c("success",f))};for(a=0;a<b.length;a++){var h=b[a];switch(h.status){case "ready":h.addListener(d);h.start();break;case "running":h.addListener(d);break;default:d(h)}}}})}})();
