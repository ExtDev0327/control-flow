(function(){var j=function(){};j.prototype.isCancellation=!0;var k=function(){};k.prototype={register:function(a){this.isCancellationRequested&&a();if(!this._handlers)this._handlers=[];this._handlers.push(a)},unregister:function(a){this._handlers&&(a=this._handlers.indexOf(a),a>=0&&this._handlers.splice(a,1))},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var a=this._handlers;delete this._handlers;for(var d=0;d<a.length;d++)try{a[d]()}catch(e){Jscex.log("Cancellation handler threw an error: "+
e)}}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new j;}};var n=0,l=typeof require!=="undefined"&&typeof module!=="undefined"&&module.exports,m=function(a,d){d||(d=a);d.binders&&(d.binders.async="$await");if(!a.modules)a.modules={};if(!a.modules.async){var e=function(b){this.id=(++n).toString();this._delegate=b;this._listeners={};this.status="ready"};e.prototype={start:function(){if(this.status!="ready")throw Error('Task can only be started in "ready" status.');
var b=this;this.status="running";this._delegate.onStart(function(a,c){if(b.status!="running")throw Error('Callback can only be used in "running" status.');if(a=="success")b.result=c,b.status="succeeded",b._notify("success");else if(a=="failure")b.error=c,b.status=c.isCancellation?"canceled":"failed",b._notify("failure");else throw Error("Unsupported type: "+a);b._notify("complete");delete b._listeners})},_notify:function(b){var f=this._listeners[b];if(f)for(var c=0;c<f.length;c++)try{f[c](this)}catch(h){a.log("WARNING: the task's "+
b+" listener threw an error: "+h)}},addEventListener:function(b,a){if(!this._listeners)throw Error('Listeners can only be added in "ready" or "running" status.');this._listeners[b]||(this._listeners[b]=[]);this._listeners[b].push(a)},removeEventListener:function(a,f){if(!this._listeners)throw Error('Listeners can only be removed in "ready" or "running" status.');var c=this._listeners[a];if(c){var h=c.indexOf(f);h>=0&&c.splice(h,1)}}};var g=function(){};g.prototype={Start:function(a,f){return new e({onStart:function(c){f.next(a,
function(a,b){if(a=="normal"||a=="return")c("success",b);else if(a=="throw")c("failure",b);else throw Error("Unsupported type: "+a);})}})},Bind:function(a,f){return{next:function(c,d){var e=function(a){if(a.error)d("throw",a.error);else{var b;try{b=f.call(c,a.result)}catch(e){d("throw",e);return}b.next(c,d)}};a.status=="ready"?(a.addEventListener("complete",e),a.start()):a.status=="running"?a.addEventListener("complete",e):e(a)}}}};l?require("./jscex-builderbase").standardizeBuilder(g.prototype):
a.standardizeBuilder(g.prototype);if(!a.Async)a.Async={};var i=a.Async;i.CancellationToken=k;i.CanceledError=j;i.Task=e;i.Builder=g;if(!a.builders)a.builders=[];a.builders.async=new g;a.modules.async=!0}};l?module.exports.init=m:m(Jscex)})();
