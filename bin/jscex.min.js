Jscex=function(){function e(a){this.m=a;this.g=Jscex.p[a].binder;this.d=!1}function f(a,b){return(new e(a)).o(b)}e.prototype={a:function(a){this.k.push(a);return this},o:function(a){this.k=[];var b=a[2];a=a[3];this.a("function (").a(b.join(", ")).a(") {");this.a("var ").a("$_builder_$").a(" = Jscex.builders[").a(JSON.stringify(this.m)).a("];");this.a("return ").a("$_builder_$").a(".Start(this, function () {");this.c(a);this.a("});");this.a("}");return this.k.join("")},n:function(a){var b=a[0];if(b==
"stat"){if(b=a[1],b[0]=="call"){var c=b[1];if(c[0]=="name"&&c[1]==this.g)return{i:b[2][0],f:"",j:!1}}}else if(b=="var"){if(a=a[1],a.length==1&&(b=a[0],a=b[0],(b=b[1])&&b[0]=="call"))if(c=b[1],c[0]=="name"&&c[1]==this.g)return{i:b[2][0],f:a,j:!1}}else if(b=="return"&&(b=a[1])&&b[0]=="call")if(c=b[1],c[0]=="name"&&c[1]==this.g)return{i:b[2][0],f:"$$__$$__",j:!0};return null},c:function(a,b){arguments.length<=1&&(b=0);if(b>=a.length)return this.a("return ").a("$_builder_$").a(".Normal();"),this;var c=
a[b],d=this.n(c);d?(this.a("return ").a("$_builder_$").a(".Bind(").b(d.i).a(", function (").a(d.f).a(") {"),d.j?this.a("return ").a("$_builder_$").a(".Return(").a(d.f).a(");"):this.c(a,b+1),this.a("});")):(d=c[0],d=="return"||d=="break"||d=="continue"||d=="throw"?this.b(c):d=="while"||d=="try"||d=="if"||d=="for"||d=="do"?b==a.length-1?this.a("return ").b(c).a(";"):(this.a("return ").a("$_builder_$").a(".Combine("),this.b(c).a(",").a("$_builder_$").a(".Delay(function() {"),this.c(a,b+1),this.a("})"),
this.a(");")):this.b(c).c(a,b+1));return this},e:function(a){for(var b=0,c=a.length;b<c;b++)this.b(a[b])},l:function(a){var b=this.d;this.d=!0;var c=a[1],d=a[2];a=a[3];this.a("function ").a(c).a("(").a(d.join(", ")).a(") {");this.e(a);this.a("}");this.d=b},b:function(a){var b=a[0],c=null;this.d?(c=this.h[b+"_n"])||(c=this.h[b]):c=this.h[b];c&&c.call(this,a);return this},h:{call:function(a){this.b(a[1]).a("(");a=a[2];for(var b=0,c=a.length;b<c;b++)this.b(a[b]),b<c-1&&this.a(", ");this.a(")")},name:function(a){this.a(a[1])},
object:function(a){this.a("{");a=a[1];for(var b=0,c=a.length;b<c;b++)this.a(JSON.stringify(a[b][0])).a(": "),this.b(a[b][1]),b<c-1&&this.a(", ");this.a("}")},array:function(a){this.a("[");a=a[1];for(var b=0,c=a.length;b<c;b++)this.b(a[b]),b<c-1&&this.a(", ");this.a("]")},num:function(a){this.a(a[1])},regexp:function(a){this.a("/").a(a[1]).a("/").a(a[2])},string:function(a){this.a(JSON.stringify(a[1]))},"for":function(a){this.a("$_builder_$").a(".Delay(function() {");var b=a[1];b&&(b[0]=="var"?this.b(b):
this.b(b).a(";"));this.a("return ").a("$_builder_$").a(".Loop(");(b=a[2])?(this.a("function () {"),this.a("return ").b(b).a(";"),this.a("},")):this.a("null,");this.a("function () { ");(b=a[3])&&this.b(b).a(";");this.a("},").a("$_builder_$").a(".Delay(function() {");this.b(a[4]);this.a("}),").a("false");this.a(");");this.a("})")},for_n:function(a){this.a("for (");var b=a[1];b?(this.b(b),b[0]!="var"?this.a("; "):this.a(" ")):this.a("; ");(b=a[2])&&this.b(b);this.a("; ");(b=a[3])&&this.b(b);this.a(") {");
this.b(a[4]);this.a("}")},"var":function(a){this.a("var ");a=a[1];for(var b=0,c=a.length;b<c;b++)this.a(a[b][0]).a(" = ").b(a[b][1]),b<c-1&&this.a(", ");this.a(";")},binary:function(a){var b=a[1],c=a[2];a=a[3];this.a("(").b(c).a(") ");this.a(b);this.a(" (").b(a).a(")")},sub:function(a){var b=a[1];a=a[2];this.a("(").b(b).a(")[").b(a).a("]")},"unary-postfix":function(a){var b=a[1];this.b(a[2]).a(b)},"unary-prefix":function(a){var b=a[2];this.a(a[1]).b(b)},assign:function(a){var b=a[1],c=a[3];this.b(a[2]);
typeof b=="string"?this.a(" ").a(b).a("= "):this.a(" = ");this.b(c)},stat:function(a){this.b(a[1]).a(";")},dot:function(a){this.a("(").b(a[1]).a(").").a(a[2])},block:function(a){this.c(a[1])},block_n:function(a){this.e(a[1])},"new":function(a){var b=a[1];this.a("new ").b(b).a("(");a=a[2];b=0;for(var c=a.length;b<c;b++)this.b(a[b]),b<c-1&&this.a(", ");this.a(")")},"while":function(a){this.a("$_builder_$").a(".Loop(");this.a("function () {");var b=a[1];this.a("return ").b(b).a(";");this.a("},").a("null, ").a("$_builder_$").a(".Delay(function() {");
this.b(a[2]);this.a("}),").a("false");this.a(")")},while_n:function(a){var b=a[1];a=a[2];this.a("while (").b(b).a(") {");this.b(a);this.a("}")},"do":function(a){this.a("$_builder_$").a(".Loop(");var b=a[1];this.a("function () { return ").b(b).a("; },").a("null, ").a("$_builder_$").a(".Delay(function () {");this.b(a[2]);this.a("}),").a("true");this.a(")")},do_n:function(a){var b=a[1];a=a[2];this.a("do {");this.b(a);this.a("} while (").b(b).a(")")},"if":function(a){for(this.a("$_builder_$").a(".Delay(function() {");;){var b=
a[1];this.a("if (").b(b).a(") {");this.b(a[2]);this.a("} else ");if((b=a[3])&&b[0]=="if")a=b;else break}this.a("{");(b=a[3])?this.b(b):this.a("return ").a("$_builder_$").a(".Normal();");this.a("}");this.a("})")},if_n:function(a){var b=a[1],c=a[2];this.a("if (").b(b).a(") {");this.b(c);this.a("}");if(a=a[3])a[0]=="if"?this.a(" else ").b(a):(this.a(" else {"),this.b(a),this.a("}"))},"return":function(a){this.a("return ").a("$_builder_$").a(".Return(");(a=a[1])&&this.b(a);this.a(");")},return_n:function(a){this.a("return");
(a=a[1])&&this.a(" ").b(a);this.a(";")},"break":function(){this.a("return ").a("$_builder_$").a(".Break();")},break_n:function(){this.a("break;")},"continue":function(){this.a("return ").a("$_builder_$").a(".Continue();")},continue_n:function(){this.a("continue;")},"throw":function(a){this.a("return ").a("$_builder_$").a(".Throw(").b(a[1]).a(");")},throw_n:function(a){this.a("throw ").b(a[1]).a(";")},conditional:function(a){this.a("(").b(a[1]).a(") ? (").b(a[2]).a(") : (").b(a[3]).a(")")},"try":function(a){this.a("$_builder_$").a(".Try(");
this.a("$_builder_$").a(".Delay(function () {");this.c(a[1]);this.a("}), ");a=a[2];this.a("function (").a(a[0]).a(") {");this.c(a[1]);this.a("}");this.a(")")},try_n:function(a){this.a("try {");this.e(a[1]);a=a[2];this.a("} catch (").a(a[0]).a(") {");this.e(a[1]);this.a("}")},defun:function(a){this.l(a)},"function":function(a){this.l(a)}}};return{generate:f,compile:function(a,b){var c=UglifyJS.parse("var f = "+b.toString()+";")[1][0][1][0][1];return"("+f(a,c)+");"},builders:{}}}();
