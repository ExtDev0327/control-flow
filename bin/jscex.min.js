Jscex=function(){function g(a){this.n=Jscex.builders[a].binder;this.b=this.t=null}function h(a){this.H=a;this.n=Jscex.builders[a].binder;this.O=!1;this.e="$$_builder_$$_"+e++}function j(a){if(a[0]!="call")return!1;var b=a[1];if(b[0]!="name"||b[1]!="eval")return!1;a=a[2][0];if(!a||a[0]!="call")return!1;b=a[1];if(!b||b[0]!="dot"||b[2]!="compile")return!1;b=b[1];if(!b||b[0]!="name"||b[1]!="Jscex")return!1;b=a[2][0];if(!b||b[0]!="string")return!1;a=a[2][1];if(!a||a[0]!="function")return!1;return!0}function i(a){var b=
a[2][0][2][0][1];a=a[2][0][2][1];var c=(new g(b)).B(a);return(new h(b)).B(a[2],c)}var e=0;g.prototype={B:function(a){a=a[3];this.t={type:"delay",d:[]};this.b=this.t.d;this.i(a);return this.t},I:function(a){var b=a[0];if(b=="stat"){if(b=a[1],b[0]=="call"){var c=b[1];if(c[0]=="name"&&c[1]==this.n)return{z:b[2][0],q:"",s:!1}}}else if(b=="var"){if(a=a[1],a.length==1&&(b=a[0],a=b[0],(b=b[1])&&b[0]=="call"))if(c=b[1],c[0]=="name"&&c[1]==this.n)return{z:b[2][0],q:a,s:!1}}else if(b=="return"&&(b=a[1])&&b[0]==
"call")if(c=b[1],c[0]=="name"&&c[1]==this.n)return{z:b[2][0],q:"$$_result_$$",s:!0};return null},i:function(a,b){arguments.length<=1&&(b=0);if(b>=a.length)return this.b.push({type:"normal"}),this;var c=a[b],d=this.I(c);if(d){if(c={type:"bind",info:d},this.b.push(c),!d.s)c.d=[],d=this.b,this.b=c.d,this.i(a,b+1),this.b=d}else if(d=c[0],d=="return"||d=="break"||d=="continue"||d=="throw")this.b.push({type:d,g:c});else if(d=="while"||d=="try"||d=="if"||d=="for"||d=="do"||d=="for-in")if(b==a.length-1)this.l(c);
else{var e={type:"combine",F:{type:"delay",d:[]},G:{type:"delay",d:[]}};this.b.push(e);d=this.b;this.b=e.F.d;this.l(c);this.b=e.G.d;this.i(a,b+1);this.b=d}else this.b.push({type:"raw",g:c}),this.i(a,b+1);return this},l:function(a){var b=this.L[a[0]];b&&b.call(this,a);return this},o:function(a){a[0]=="block"?this.l(a):this.i([a])},L:{"for":function(a){var b={type:"delay",d:[]};this.b.push(b);var c=a[1];c&&b.d.push({type:"raw",g:c});c={type:"loop",r:!1,f:{type:"delay",d:[]}};b.d.push(c);if(b=a[2])c.m=
b;if(b=a[3])c.update=b;b=this.b;this.b=c.f.d;this.o(a[4]);this.b=b},"for-in":function(a){var b="$$_members_$$_"+e,c="$$_index_$$_"+e,d="$$_mem_$$_"+e;e++;var g=a[3],f={type:"delay",d:[]};this.b.push(f);f.d.push({type:"raw",g:["var",[[b,["array",[]]]]]});f.d.push({type:"raw",g:["for-in",["var",[[d]]],["name",[d]],g,["stat",["call",["dot",["name",b],"push"],[["name",d]]]]]});f.d.push({type:"raw",g:["var",[[c,["num",0]]]]});d={type:"loop",r:!1,update:["unary-postfix","++",["name",c]],m:["binary","<",
["name",c],["dot",["name",b],"length"]],f:{type:"delay",d:[]}};f.d.push(d);f=a[2][1];a[1][0]=="var"?d.f.d.push({type:"raw",g:["var",[[f,["sub",["name",b],["name",c]]]]]}):d.f.d.push({type:"raw",g:["stat",["assign",!0,["name",f],["sub",["name",b],["name",c]]]]});b=this.b;this.b=d.f.d;this.o(a[4]);this.b=b},block:function(a){this.i(a[1])},"while":function(a){var b={type:"loop",r:!1,f:{type:"delay",d:[]}};this.b.push(b);b.m=a[1];var c=this.b;this.b=b.f.d;this.o(a[2]);this.b=c},"do":function(a){var b=
{type:"loop",r:!0,f:{type:"delay",d:[]}};this.b.push(b);b.m=a[1];var c=this.b;this.b=b.f.d;this.o(a[2]);this.b=c},"if":function(a){var b={type:"if",v:[]};for(this.b.push(b);;){var c={M:a[1],d:[]};b.v.push(c);var d=this.b;this.b=c.d;this.l(a[2]);this.b=d;if((c=a[3])&&c[0]=="if")a=c;else break}if(c=a[3])b.w=[],d=this.b,this.b=b.w,this.l(c),this.b=d},"try":function(a){var b={type:"try",f:{type:"delay",d:[]}};this.b.push(b);var c=this.b;this.b=b.f.d;this.i(a[1]);this.b=c;var d=a[2];if(d)b.N=d[0],b.u=
[],c=this.b,this.b=b.u,this.i(d[1]),this.b=c;if(a=a[3])b.A={type:"delay",d:[]},c=this.b,this.b=b.A.d,this.i(a),this.b=c}}};h.prototype={a:function(a){this.C.push(a);return this},B:function(a,b){this.C=[];this.a("(function ("+a.join(", ")+") {");this.a("var "+this.e+" = Jscex.builders["+JSON.stringify(this.H)+"];");this.a("return "+this.e+".Start(this,");this.h(b);this.a(");");this.a("})");return this.C.join("")},h:function(a){this.J[a.type].call(this,a);return this},c:function(a){var b=this.K[a[0]];
b&&b.call(this,a);return this},j:function(a){for(var b=0;b<a.length;b++){var c=a[b];c.type=="raw"||c.type=="if"?this.h(c):c.type=="delay"?this.j(c.d):this.a("return ").h(c).a(";")}},k:function(a){for(var b=0;b<a.length;b++)this.c(a[b])},p:function(a){this.c(a);return this},D:function(a){var b=a[3];this.a("function "+(a[1]||"")+"("+a[2].join(", ")+") {");this.k(b);this.a("}")},J:{delay:function(a){if(a.d.length==1){var b=a.d[0];switch(b.type){case "delay":case "combine":case "normal":case "break":case "continue":case "loop":case "try":this.h(b);
return;case "return":if(!b.g[1]){this.h(b);return}}}this.a(this.e+".Delay(function () {");this.j(a.d);this.a("})")},combine:function(a){this.a(this.e+".Combine(");this.h(a.F).a(",");this.h(a.G);this.a(")")},loop:function(a){this.a(this.e+".Loop(");a.m?(this.a("function () {"),this.a("return ").c(a.m).a(";"),this.a("},")):this.a("null,");a.update?(this.a("function () {"),this.c(a.update).a(";"),this.a("},")):this.a("null,");this.h(a.f).a(",");this.a(a.r);this.a(")")},raw:function(a){this.c(a.g)},bind:function(a){var b=
a.info;this.a(this.e+".Bind(").c(b.z).a(", function ("+b.q+") {");b.s?this.a("return "+this.e+".Return("+b.q+");"):this.j(a.d);this.a("})")},"if":function(a){for(var b=0;b<a.v.length;b++){var c=a.v[b];this.a("if (").c(c.M).a(") {");this.j(c.d);this.a("} else ")}this.a("{");a.w?this.j(a.w):this.a("return "+this.e+".Normal();");this.a("}")},"try":function(a){this.a(this.e+".Try(");this.h(a.f).a(",");a.u?(this.a("function ("+a.N+") {"),this.j(a.u),this.a("},")):this.a("null,");a.A?this.h(a.A):this.a("null");
this.a(")")},normal:function(){this.a(this.e+".Normal()")},"throw":function(a){this.a(this.e+".Throw(").c(a.g[1]).a(")")},"break":function(){this.a(this.e+".Break()")},"continue":function(){this.a(this.e+".Continue()")},"return":function(a){this.a(this.e+".Return(");a.g[1]&&this.c(a.g[1]);this.a(")")}},K:{"var":function(a){this.a("var ");a=a[1];for(var b=0;b<a.length;b++)this.a(a[b][0]),a[b].length>1&&this.a(" = ").c(a[b][1]),b<a.length-1&&this.a(", ");this.a(";")},seq:function(a){for(var b=1;b<a.length;b++)this.c(a[b]),
b<a.length-1&&this.a(", ")},binary:function(a){var b=a[1],c=a[2];a=a[3];this.a("(").c(c).a(") ");this.a(b);this.a(" (").c(a).a(")")},sub:function(a){var b=a[1];a=a[2];this.a("(").c(b).a(")[").c(a).a("]")},"unary-postfix":function(a){var b=a[1];this.c(a[2]).a(b)},"unary-prefix":function(a){var b=a[2];this.a(a[1]).c(b)},assign:function(a){var b=a[1],c=a[3];this.c(a[2]);typeof b=="string"?this.a(" "+b+"= "):this.a(" = ");this.c(c)},stat:function(a){this.c(a[1]).a(";")},dot:function(a){this.a("(").c(a[1]).a(").").a(a[2])},
"new":function(a){var b=a[1];this.a("new ").c(b).a("(");a=a[2];b=0;for(var c=a.length;b<c;b++)this.c(a[b]),b<c-1&&this.a(", ");this.a(")")},call:function(a){if(j(a))this.a(i(a));else{this.c(a[1]).a("(");a=a[2];for(var b=0;b<a.length;b++)this.c(a[b]),b<a.length-1&&this.a(", ");this.a(")")}},name:function(a){this.a(a[1])},object:function(a){this.a("{");a=a[1];for(var b=0;b<a.length;b++)this.a(JSON.stringify(a[b][0])+": ").c(a[b][1]),b<a.length-1&&this.a(", ");this.a("}")},array:function(a){this.a("[");
a=a[1];for(var b=0;b<a.length;b++)this.c(a[b]),b<a.length-1&&this.a(", ");this.a("]")},num:function(a){this.a(a[1])},regexp:function(a){this.a("/"+a[1]+"/"+a[2])},string:function(a){this.a(JSON.stringify(a[1]))},"function":function(a){this.D(a)},defun:function(a){this.D(a)},"return":function(a){this.a("return");(a=a[1])&&this.a(" ").c(a);this.a(";")},"for":function(a){this.a("for (");var b=a[1];b?(this.c(b),b[0]!="var"?this.a("; "):this.a(" ")):this.a("; ");(b=a[2])&&this.c(b);this.a("; ");(b=a[3])&&
this.c(b);this.a(") ");this.p(a[4])},"for-in":function(a){this.a("for (");var b=a[1];b[0]=="var"?this.a("var "+b[1][0][0]):this.c(b);this.a(" in ").c(a[3]).a(") ");this.p(a[4])},block:function(a){this.a("{");this.k(a[1]);this.a("}")},"while":function(a){var b=a[1];a=a[2];this.a("while (").c(b).a(") ").p(a)},"do":function(a){var b=a[1];a=a[2];this.a("do ").p(a).a("while (").c(b).a(");")},"if":function(a){var b=a[1],c=a[2];this.a("if (").c(b).a(") {");this.c(c);this.a("}");if(a=a[3])a[0]=="if"?this.a(" else ").c(a):
(this.a(" else {"),this.c(a),this.a("}"))},"break":function(){this.a("break;")},"continue":function(){this.a("continue;")},"throw":function(a){this.a("throw ").c(a[1]).a(";")},conditional:function(a){this.a("(").c(a[1]).a(") ? ("+a[2]+") : (").c(a[3]).a(")")},"try":function(a){this.a("try {");this.k(a[1]);var b=a[2];a=a[3];b&&(this.a("} catch ("+b[0]+") {"),this.k(b[1]));a&&(this.a("} finally {"),this.k(a));this.a("}")},"switch":function(a){this.a("switch (").c(a[1]).a(") {");a=a[2];for(var b=0;b<
a.length;b++){var c=a[b];c[0]?this.a("case ").c(c[0]).a(":"):this.a("default:");this.k(c[1])}this.a("}")}}};return{config:{},compile:function(a,b){var c=b.toString();c="eval(Jscex.compile("+JSON.stringify(a)+", "+c+"))";c=UglifyJS.parse(c)[1][0][1];c=i(c);var d=Jscex.config.codeGenerator;return d?d(c):c},builders:{}}}();
