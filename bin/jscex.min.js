var Jscex=function(){function e(a){this.c=a.name;this.g=a.binder}e.prototype={a:function(a){this.e.push(a);return this},k:function(a){this.e=[];var b=a[2];a=a[3];this.a("function (").a(b.join(", ")).a(") {");this.a("return ").a(this.c).a(".Start(this, function () {");this.d(a);this.a("});");this.a("};");return this.e.join("")},h:function(a){if(a[0]=="stat"&&(a=a[1],a[0]=="call")){var b=a[1];if(b[0]=="name"&&b[1]==this.g)return{j:a[2][0],f:""}}return null},d:function(a,b){arguments.length<=1&&(b=
0);if(b>=a.length)return this.a("return ").a(this.c).a(".Normal();"),this;var c=a[b],d=this.h(c);d?(this.a("return ").a(this.c).a(".Bind(").b(d.j).a(", function (").a(d.f).a(") {"),d.l?this.a("return ").a(this.c).a(".Return(").a(d.f).a(");"):this.d(a,b+1),this.a("});")):(d=c[0],d=="return"||d=="break"||d=="continue"||d=="throw"?this.b(c):d=="while"||d=="try"||d=="if"||d=="for"||d=="do"?b==a.length-1?this.a("return ").b(c).a(";"):(this.a("return ").a(this.c).a(".Combine("),this.b(c).a(",").a(this.c).a(".Delay(function() {"),
this.d(a,b+1),this.a("})"),this.a(");")):this.b(c).d(a,b+1));return this},b:function(a){var b=a[0],c=this.i[b];if(c)c.call(this,a);else{debugger;throw Error("Unsupported type: "+b);}return this},i:{call:function(a){this.b(a[1]).a("(");a=a[2];for(var b=0,c=a.length;b<c;b++)this.b(a[b]),b<c-1&&this.a(", ");this.a(")")},name:function(a){this.a(a[1])},object:function(a){this.a("{");a=a[1];for(var b=0,c=a.length;b<c;b++)this.a(JSON.stringify(a[b][0])).a(": "),this.b(a[b][1]),b<c-1&&this.a(", ");this.a("}")},
num:function(a){this.a(a[1])},"for":function(a){this.a(this.c).a(".Delay(function() {");var b=a[1];b&&(b[0]=="var"?this.b(b):this.b(b).a(";"));this.a("return ").a(this.c).a(".Loop(");(b=a[2])?(this.a("function () {"),this.a("return ").b(b).a(";"),this.a("},")):this.a("null,");this.a("function () { ");(b=a[3])&&this.b(b).a(";");this.a("},").a(this.c).a(".Delay(function() {");this.d(a[4][1]);this.a("}),").a("false");this.a(");");this.a("})")},"var":function(a){this.a("var ");a=a[1];for(var b=0,c=a.length;b<
c;b++)this.a(a[b][0]).a(" = ").b(a[b][1]),b<c-1&&this.a(", ");this.a(";")},binary:function(a){var b=a[1],c=a[2];a=a[3];this.a("(").b(c).a(") ").a(b).a(" (").b(a).a(")")},sub:function(a){var b=a[1];a=a[2];this.a("(").b(b).a(")[").b(a).a("]")},"unary-postfix":function(a){var b=a[1];this.b(a[2]).a(b)},assign:function(a){var b=a[1],c=a[3];this.b(a[2]);typeof b=="string"?this.a(" ").a(b).a("= "):this.a(" = ");this.b(c)},stat:function(a){this.b(a[1]).a(";")},dot:function(a){this.a("(").b(a[1]).a(").").a(a[2])},
block:function(a){this.d(a[1])},"new":function(a){var b=a[1];this.a("new ").b(b).a("(");a=a[2];b=0;for(var c=a.length;b<c;b++)this.b(a[b]),b<c-1&&this.a(", ");this.a(")")},"while":function(a){this.a(this.c).a(".Loop(");this.a("function () {");var b=a[1];this.a("return ").b(b).a(";");this.a("},").a("null, ").a(this.c).a(".Delay(function() {");this.b(a[2]);this.a("}),").a("false");this.a(")")},"if":function(a){for(this.a(this.c).a(".Delay(function() {");;){var b=a[1];this.a("if (").b(b).a(") {");this.b(a[2]);
this.a("} else ");if((b=a[3])&&b[0]=="if")a=b;else break}this.a("{");(b=a[3])?this.b(b):this.a("return ").a(this.c).a(".Normal();");this.a("}");this.a("})")}}};return{compile:function(a,b){var c=b.toString(),d=UglifyJS.parse("var f = "+c+";")[1][0][1][0][1];d=(new e(a)).k(d);typeof console!="undefined"&&console.log&&console.log(c+"\n\n>>>\n\n"+d);return"(function () {\n\nreturn "+d+"\n\n})();"}}}();
