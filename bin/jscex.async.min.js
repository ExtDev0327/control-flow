typeof Jscex=="undefined"&&(Jscex={builders:{}});Jscex.Async={};Jscex.Async.Task=function(e){this.b=e;this.a=[];this.status="ready"};
Jscex.Async.Task.prototype={start:function(){if(this.status!="ready")throw"Cannot start in current status: "+this.status;var e=this;this.status="running";this.b.start(function(a,c){if(a=="success")e.result=c,e.status="succeeded";else if(a=="failure")e.error=c,e.status="failed";else throw"Unsupported type: "+a;var b=e.a;delete e.a;for(var d=0;d<b.length;d++)try{b[d](e)}catch(f){}})},addListener:function(e){if(!this.a)throw"Cannot add listeners in current status: "+this.status;this.a.push(e)}};
(function(){Jscex.builders.async={binder:"$await",Start:function(a,c){return new Jscex.Async.Task({start:function(b){c.start(a,function(a,f){if(a=="normal"||a=="return")b("success",f);else if(a=="throw")b("failure",f);else throw"Unsupported type: "+a;})}})},Bind:function(a,c){return{start:function(b,d){function f(f){if(f.status=="succeeded"){var e;try{e=c.call(b,a.result)}catch(g){d("throw",g);return}e.start(b,d)}else d("throw",a.error)}a.status=="ready"?(a.addListener(f),a.start()):a.status=="running"?
a.addListener(f):f(a)}}},Loop:function(a,c,b,d){return{start:function(f,e){function h(b){try{c&&!b&&c.call(f),!a||a.call(f)?g(!1):e("normal")}catch(d){e("throw",d)}}function g(a){b.start(f,function(b,f){if(b=="normal"||b=="continue")h(a);else if(b=="throw"||b=="return")e(b,f);else if(b=="break")e("normal");else throw'Invalid type for "Loop": '+b;})}d?g(!0):h(!0)}}},Delay:function(a){return{start:function(c,b){try{a.call(c).start(c,b)}catch(d){b("throw",d)}}}},Combine:function(a,c){return{start:function(b,
d){a.start(b,function(a,e,h){if(a=="normal")try{c.start(b,d)}catch(g){d("throw",g)}else d(a,e,h)})}}},Return:function(a){return{start:function(c,b){b("return",a)}}},Normal:function(){return{start:function(a,c){c("normal")}}},Break:function(){return{start:function(a,c){c("break")}}},Continue:function(){return{start:function(a,c){c("continue")}}},Throw:function(a){return{start:function(c,b){b("throw",a)}}},Try:function(a,c,b){return{start:function(d,f){a.start(d,function(a,e,g){if(a!="throw"||!c)b?
b.start(d,function(b,c,d){b=="normal"?f(a,e,g):f(b,c,d)}):f(a,e,g);else if(c){var i;try{i=c.call(d,e)}catch(j){b?b.start(d,function(a,b,c){a=="normal"?f("throw",j):f(a,b,c)}):f("throw",j)}i&&i.start(d,function(a,c,e){a=="throw"?b?b.start(d,function(b,d,g){b=="normal"?f(a,c,e):f(b,d,g)}):f(a,c,e):b?b.start(d,function(b,d,g){b=="normal"?f(a,c,e):f(b,d,g)}):f(a,c,e)})}else b.start(d,function(b,c,d){b=="normal"?f(a,e,g):f(b,c,d)})})}}}};var e=Jscex.Async;e.sleep=function(a){return new Jscex.Async.Task({start:function(c){setTimeout(function(){c("success")},
a)}})};e.onEvent=function(a,c){return new Jscex.Async.Task({start:function(b){var d="on"+c;a[d]=function(c){a[d]=null;b("success",c)}}})}})();
